{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/App.vue?7f25","webpack:///./src/components/QuestionCard.vue?45de","webpack:///src/components/QuestionCard.vue","webpack:///./src/components/QuestionCard.vue?52f0","webpack:///./src/components/QuestionCard.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js","webpack:///./src/data_handler.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","current","question_created","required_question_count","default_question_answered_count","default_question_count","_f","pay_base_amount","pay_bonus_amount","pay_total_amount","_m","staging","passage_id","on","invalidate_selection","_l","char","index","class","highlight","should_highlight","select_highlight","is_in_selection_highlight","is_selected_answer","is_selected_answer_highlight","$event","mousedown_text","mouseup_text","mouseenter_text","double_clicked_text","data_loaded","_e","attrs","event_selection_error_message","showing_qa_panel","domProps","display_selected_text","is_selection_empty","add_event","clear_selection","event","idx","event_text","staticStyle","delete_event","event_selection_button_clicked","event_selection_button_text","directives","rawName","current_question","expression","is_default_question","target","composing","$set","on_question_text_change","qa_error_message","add_answer","delete_answer","add_question","save_question_button_text","q","get_all_answer_surface_form","delete_question","edit_question","derive_question","prev_passage_disabled","previous_passage","next_passage_disabled","next_passage","feedback","submit_disabled","check_before_submit","submission_error_msg","hidden","submission_not_ready","mturk_params","turkSubmitTo","assignmentId","generated_answers","generated_answers_event","staticRenderFns","question","text","answers_text_or_not_answered","onDerive","onEdit","onDelete","component","components","QuestionCard","annotations","selection_state","selection","start","end","selected_char_indices","selected_char_indices_for_answers","question_id_counter","passage","question_id","answers","question_is_derived_from","events","questions","has_event_error","has_qa_error","has_submission_error","hitId","workerId","isPreview","mounted","computed","sorted_staging_events","ret","Math","max","surface","substring","methods","hide_event_error","hide_qa_error","hide_submission_error","show_event_error","msg","show_qa_error","show_submission_error","reset_highlight_map","is_event_text_single_token","can_add_event","trim_start_end_to_nearest_space","new_start","new_end","state","$delete","is_answer_not_event","event_key","can_add_answer","console","log","highlight_selected_answer","is_question_suspicious","trimmedQuestion","includes","keyword","endsWith","current_question_is_duplicated","can_add_question","get_new_question_id","clear_current_answer_highlight","keys","answers_surface","can_submit_fast_check","create_submission_object","answer","spans","indices","passageID","is_answered","pass_check","question_count","isAnswered","derived_from","question_annotation","passage_text","generated_qas","qkey","event_response","generated_events","JSON","stringify","save_staged_passage","stage_new_passage","annotation","existing_annotation","_start","_end","shouldStop","filters","currency","toFixed","Vue","config","productionTip","render","h","App","$mount","NUM_PASSAGES","chooseKfromArray","k","values","indexArray","sort","random","get_offline_contents","passage_data","passage_ids","split","loadErrorPassages","passages","parsePassages","response","status","json","all_passage_ids","selected_passages","fetchPassagesWithRetries","data_url","fetch"],"mappings":"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","file":"js/app.2a762b3e.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"card mb-4\"},[_c('div',{staticClass:\"card-header\"},[_c('h4',[_vm._v(\" Questions created: \"),_c('span',[_vm._v(_vm._s(_vm.current.question_created)+\" / \"+_vm._s(this.required_question_count))]),_vm._v(\". Default questions answered: \"),_c('span',[_vm._v(_vm._s(_vm.current.default_question_answered_count)+\" / \"+_vm._s(_vm.current.default_question_count))]),_vm._v(\". Pay: \"),_c('span',[_vm._v(\" $\"+_vm._s(_vm._f(\"currency\")(_vm.pay_base_amount))+\" + $ \"+_vm._s(_vm._f(\"currency\")(_vm.pay_bonus_amount))+\" = $ \"+_vm._s(_vm._f(\"currency\")(_vm.pay_total_amount)))]),_vm._v(\". \")])]),_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"container\"},[_vm._m(0),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-lg-4\"},[_c('div',{staticClass:\"card sticky-top\"},[_c('div',{staticClass:\"card-header\"},[_c('h4',[_vm._v(\" Passage \"+_vm._s(_vm.staging.passage_id + 1)+\" \")])]),_c('div',{staticClass:\"card-body passage-display-box\"},[(_vm.data_loaded)?_c('div',{staticClass:\"card-text\"},[_c('div',[_c('div',{staticClass:\"passage-text\",on:{\"mouseleave\":_vm.invalidate_selection}},_vm._l((_vm.staging.passage),function(char,index){return _c('span',{key:char.index,staticClass:\"noselect\",class:{\n                                    highlight: _vm.should_highlight(index),\n                                    select_highlight: _vm.is_in_selection_highlight(index),\n                                    is_selected_answer: _vm.is_selected_answer_highlight(index),\n                                  },on:{\"mousedown\":function($event){return _vm.mousedown_text(index)},\"mouseup\":function($event){return _vm.mouseup_text(index)},\"mouseenter\":function($event){return _vm.mouseenter_text(index)},\"dblclick\":function($event){return _vm.double_clicked_text(index)}}},[_vm._v(_vm._s(char))])}),0),(!_vm.data_loaded)?_c('div',{staticClass:\"spinner-border\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"})]):_vm._e()])]):_vm._e()]),(_vm.has_event_error)?_c('div',{staticClass:\"alert alert-danger fade show\",attrs:{\"role\":\"alert\"}},[_c('strong',[_vm._v(_vm._s(_vm.event_selection_error_message))])]):_vm._e(),_c('div',{staticClass:\"card-body\"},[(!_vm.staging.showing_qa_panel)?_c('p',[_vm._m(1)]):_vm._e(),(!_vm.staging.showing_qa_panel)?_c('div',{staticClass:\"input-group mb-3\"},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Event not selected\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon2\",\"disabled\":\"\"},domProps:{\"value\":_vm.display_selected_text}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\",\"disabled\":_vm.is_selection_empty},on:{\"click\":_vm.add_event}},[_vm._v(\"Add Event\")])]),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-outline-danger\",attrs:{\"type\":\"button\",\"data-balloon-pos\":\"up\",\"aria-label\":\"Clear selection\"},on:{\"click\":_vm.clear_selection}},[_vm._v(\"x\")])])]):_vm._e(),(!_vm.staging.showing_qa_panel)?_c('div',_vm._l((_vm.sorted_staging_events),function(event,idx){return _c('div',{key:idx},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('p',{staticClass:\"card-text\"},[_vm._v(\" \"+_vm._s(_vm.event_text(event))+\" \")]),_c('a',{staticClass:\"card-link text-danger\",staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.delete_event(event)}}},[_vm._v(\" Delete Event \")])])])])}),0):_vm._e(),_c('button',{staticClass:\"btn btn-primary mt-4\",attrs:{\"type\":\"button\",\"id\":\"next_question-event\"},on:{\"click\":_vm.event_selection_button_clicked}},[_vm._v(\" \"+_vm._s(_vm.event_selection_button_text)+\" \")])])])]),(this.staging.showing_qa_panel)?_c('div',{staticClass:\"col-lg-8\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('h4',[_vm._v(\"Write a question about temporal relations\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.staging.current_question.text),expression:\"staging.current_question.text\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"name\":\"input-question\",\"placeholder\":\"Write a question here! The more you ask, the more bonus you will receive.\",\"disabled\":_vm.staging.current_question.is_default_question},domProps:{\"value\":(_vm.staging.current_question.text)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.staging.current_question, \"text\", $event.target.value)},_vm.on_question_text_change]}})])]),(_vm.has_qa_error)?_c('div',{staticClass:\"alert alert-danger fade show\",attrs:{\"role\":\"alert\"}},[_c('strong',[_vm._v(_vm._s(_vm.qa_error_message))])]):_vm._e(),_c('div',{staticClass:\"row mt-4\"},[_c('div',{staticClass:\"col\"},[_c('h4',[_vm._v(\"*All* valid answers from your event list\")]),_vm._v(\" Double-click to select events in the passage and they will appear in the box below.\"),_c('br'),_c('div',{staticClass:\"input-group mb-3\"},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Event not selected\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon2\",\"disabled\":\"\"},domProps:{\"value\":_vm.display_selected_text}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\",\"disabled\":_vm.is_selection_empty},on:{\"click\":_vm.add_answer}},[_vm._v(\"Add Answer\")])]),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-outline-danger\",attrs:{\"type\":\"button\",\"data-balloon-pos\":\"up\",\"aria-label\":\"Clear selection\"},on:{\"click\":_vm.clear_selection}},[_vm._v(\"x\")])])]),_vm._l((_vm.staging.current_question.answers),function(event,idx){return _c('div',{key:idx},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('p',{staticClass:\"card-text\"},[_vm._v(\" \"+_vm._s(_vm.event_text(event))+\" \")]),_c('a',{staticClass:\"card-link text-danger\",staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.delete_answer(event)}}},[_vm._v(\" Delete Event \")])])])])}),_c('div'),_c('button',{staticClass:\"btn btn-primary mt-4\",attrs:{\"type\":\"button\",\"data-balloon-pos\":\"up\",\"data-balloon-length\":\"fit\",\"aria-label\":\"We will validate your answers later; if you provide more reliable answers, you will receive extra bonus up to $50. (See details above)\"},on:{\"click\":_vm.add_question}},[_vm._v(\" \"+_vm._s(_vm.save_question_button_text)+\" \")])],2)]),_vm._l((_vm.staging.questions),function(q,idx){return _c('question-card',{key:idx,attrs:{\"question\":q,\"answer_text\":_vm.get_all_answer_surface_form(q)},on:{\"delete\":function($event){return _vm.delete_question(q)},\"edit\":function($event){return _vm.edit_question(q)},\"derive\":function($event){return _vm.derive_question(q)}}})})],2)])]):_vm._e()])])])]),_c('div',{staticClass:\"row mb-4\"},[_c('div',{staticClass:\"col text-center\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\",\"disabled\":_vm.prev_passage_disabled,\"data-balloon-pos\":\"up\",\"data-balloon-length\":\"fit\",\"aria-label\":\"You can move back and forth without losing your annotations. However, do not refresh this page using the refresh button of your browser.\"},on:{\"click\":_vm.previous_passage}},[_vm._v(\" Previous Passage \")]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\",\"disabled\":_vm.next_passage_disabled,\"data-balloon-pos\":\"up\",\"data-balloon-length\":\"fit\",\"aria-label\":\"Reminder: Please ask a similar number of questions per passage instead of asking a lot on a specific one while ignoring other passages.\"},on:{\"click\":_vm.next_passage}},[_vm._v(\" Next Passage \")])])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"card mb-4\"},[_vm._m(2),_c('div',{staticClass:\"card-body\"},[_c('div',{attrs:{\"id\":\"comment\"}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.feedback),expression:\"feedback\"}],staticClass:\"form-control\",attrs:{\"rows\":\"3\",\"placeholder\":\"Please leave your feedback here.\"},domProps:{\"value\":(_vm.feedback)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.feedback=$event.target.value}}})])])])])]),_c('div',{staticClass:\"row mb-4\"},[_c('div',{staticClass:\"col text-center\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"id\":\"ready_submit\",\"type\":\"button\",\"disabled\":_vm.submit_disabled},on:{\"click\":_vm.check_before_submit}},[_vm._v(\" Ready to Submit HIT and Scroll Down \")])])]),(_vm.has_submission_error)?_c('div',{staticClass:\"alert alert-danger fade show\",attrs:{\"role\":\"alert\"}},[_c('strong',[_vm._v(_vm._s(_vm.submission_error_msg))])]):_vm._e(),_c('form',{class:{hidden: _vm.submission_not_ready},attrs:{\"name\":\"mturk_form\",\"method\":\"post\",\"id\":\"mturk_form\",\"action\":_vm.mturk_params.turkSubmitTo}},[_c('input',{attrs:{\"type\":\"hidden\",\"name\":\"assignmentId\",\"id\":\"assignmentId\"},domProps:{\"value\":_vm.mturk_params.assignmentId}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.generated_answers),expression:\"generated_answers\"}],attrs:{\"id\":\"generated_answers\",\"name\":\"generated_answers\",\"type\":\"hidden\"},domProps:{\"value\":(_vm.generated_answers)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.generated_answers=$event.target.value}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.generated_answers_event),expression:\"generated_answers_event\"}],attrs:{\"id\":\"generated_answers_event\",\"name\":\"generated_answers_event\",\"type\":\"hidden\"},domProps:{\"value\":(_vm.generated_answers_event)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.generated_answers_event=$event.target.value}}}),_c('input',{staticClass:\"btn btn-success\",attrs:{\"type\":\"submit\",\"id\":\"submitButton\",\"name\":\"submitButton\",\"disabled\":\"\",\"value\":\"Submit HIT\"}})])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"card-text\"},[_c('strong',[_vm._v(\"Refreshing this page will randomly reload *new* passages and you will also *lose* all your answers. Using the passage navigation buttons won't delete your annotations, though.\")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('strong',[_c('span',{attrs:{\"id\":\"eventSelIns\"}},[_vm._v(\"Double-click on events in the passage above (only single tokens). \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card-header\"},[_c('h3',[_vm._v(\" Please leave your feedback here \")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card mt-2 question-card\"},[_c('div',{staticClass:\"card-body\"},[_c('p',{staticClass:\"card-text\"},[_vm._v(\" Q: \"+_vm._s(_vm.question.text)+\" \"),_c('br'),_vm._v(\" A: \"+_vm._s(_vm.answers_text_or_not_answered)+\" \")]),(_vm.show_derive_button)?_c('button',{staticClass:\"btn btn-success mr-2 tooltip-big-text\",attrs:{\"data-balloon-pos\":\"up\",\"data-balloon-length\":\"fit\",\"aria-label\":\"This button is for step 3: modify your existing question and derive a new one. Please make sure your new question has different answers than the old question.\"},on:{\"click\":_vm.onDerive}},[_vm._v(\" Derive New Question \")]):_vm._e(),(_vm.show_answer_default_button)?_c('button',{staticClass:\"btn btn-danger mr-2 tooltip-big-text\",attrs:{\"data-balloon-pos\":\"up\",\"data-balloon-length\":\"fit\",\"aria-label\":\"You need to answer this question before proceeding to the next passage.\"},on:{\"click\":_vm.onEdit}},[_vm._v(\" Answer this default question \")]):_vm._e(),(_vm.show_edit_button)?_c('button',{staticClass:\"btn btn-warning mr-2 tooltip-big-text\",attrs:{\"data-toggle\":\"tooltip\",\"data-balloon-pos\":\"up\",\"aria-label\":\"This button is to edit this question and overwrite the old one.\"},on:{\"click\":_vm.onEdit}},[_vm._v(\" Edit \")]):_vm._e(),(_vm.show_delete_button)?_c('button',{staticClass:\"btn btn-danger\",on:{\"click\":_vm.onDelete}},[_vm._v(\" Delete \")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"card mt-2 question-card\">\n        <div class=\"card-body\">\n            <p class=\"card-text\">\n                Q: {{question.text}}\n                <br>\n                A: {{answers_text_or_not_answered}}\n            </p>\n\n\n            <button\n                    class=\"btn btn-success mr-2 tooltip-big-text\"\n                    v-if=\"show_derive_button\"\n                    v-on:click=\"onDerive\"\n                    data-balloon-pos=\"up\"\n                    data-balloon-length=\"fit\"\n                    aria-label=\"This button is for step 3: modify your existing question and derive a new one. Please make sure your new question has different answers than the old question.\">\n                Derive New Question\n            </button>\n\n            <button\n                    class=\"btn btn-danger mr-2 tooltip-big-text\"\n                    v-if=\"show_answer_default_button\"\n                    v-on:click=\"onEdit\"\n                    data-balloon-pos=\"up\"\n                    data-balloon-length=\"fit\"\n                    aria-label=\"You need to answer this question before proceeding to the next passage.\">\n                Answer this default question\n            </button>\n\n            <button\n                    v-if=\"show_edit_button\"\n                    class=\"btn btn-warning mr-2 tooltip-big-text\"\n                    v-on:click=\"onEdit\"\n                    data-toggle=\"tooltip\"\n                    data-balloon-pos=\"up\"\n                    aria-label=\"This button is to edit this question and overwrite the old one.\">\n                Edit\n            </button>\n\n            <button\n                    class=\"btn btn-danger\"\n                    v-if=\"show_delete_button\"\n                    v-on:click=\"onDelete\"\n            >\n                Delete\n            </button>\n\n        </div>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'QuestionCard',\n        components: {\n\n        },\n        props: ['question', 'answer_text'],\n\n        computed: {\n\n            answers_text_or_not_answered: function(){\n                if (this.question.is_default_question){\n                    if (this.question.is_answered){\n                        return this.answer_text;\n                    }else{\n                        return \"Not answered.\";\n                    }\n                }else{\n                    return this.answer_text;\n                }\n            },\n\n            show_edit_button: function(){\n                return !this.question.is_default_question || (this.question.is_default_question && this.question.is_answered);\n            },\n\n            show_derive_button: function(){\n                return !this.question.is_default_question;\n            },\n\n            show_answer_default_button: function(){\n                return this.question.is_default_question && !this.question.is_answered;\n            },\n\n            show_delete_button: function(){\n                return !this.question.is_default_question;\n            },\n\n\n        },\n\n        methods: {\n            onDelete: function(){\n                this.$emit(\"delete\");\n            },\n\n            onEdit: function(){\n                this.$emit(\"edit\");\n            },\n\n            onDerive: function(){\n                this.$emit(\"derive\");\n            },\n\n        },\n    }\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuestionCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuestionCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./QuestionCard.vue?vue&type=template&id=0a78cb27&\"\nimport script from \"./QuestionCard.vue?vue&type=script&lang=js&\"\nexport * from \"./QuestionCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"container\">\n      <div class=\"card mb-4\">\n\n        <!--Title infos-->\n        <div class=\"card-header\">\n          <h4>\n            Questions created: <span>{{current.question_created}} / {{this.required_question_count}}</span>.\n            Default questions answered: <span>{{current.default_question_answered_count}} / {{current.default_question_count}}</span>.\n            Pay: <span> ${{pay_base_amount | currency}} + $ {{ pay_bonus_amount | currency}} = $ {{ pay_total_amount | currency}}</span>.\n          </h4>\n        </div>\n\n        <!---->\n        <div class=\"card-body\">\n          <div class=\"container\">\n            <div class=\"row\">\n              <div class=\"card-body\">\n                <div class=\"card-text\">\n                  <strong>Refreshing this page will randomly reload *new* passages and you will also *lose* all your answers. Using the passage navigation buttons won't delete your annotations, though.</strong>\n                </div>\n              </div>\n            </div>\n            <div class=\"row\">\n\n              <!--Left panel for selecting events-->\n              <div class=\"col-lg-4\">\n                <div class=\"card sticky-top\">\n                  <div class=\"card-header\">\n                    <h4>\n                      Passage {{staging.passage_id + 1}}\n                    </h4>\n                  </div>\n                  <div class=\"card-body passage-display-box\">\n                    <div class=\"card-text\" v-if=\"data_loaded\">\n                      <div>\n                        <div class=\"passage-text\" v-on:mouseleave=\"invalidate_selection\">\n                          <span\n                                  v-for=\"(char, index) in staging.passage\"\n                                  v-bind:key=\"char.index\"\n                                  v-on:mousedown=\"mousedown_text(index)\"\n                                  v-on:mouseup=\"mouseup_text(index)\"\n                                  v-on:mouseenter=\"mouseenter_text(index)\"\n                                  v-on:dblclick=\"double_clicked_text(index)\"\n                                  class=\"noselect\"\n                                  v-bind:class=\"{\n                                    highlight: should_highlight(index),\n                                    select_highlight: is_in_selection_highlight(index),\n                                    is_selected_answer: is_selected_answer_highlight(index),\n                                  }\"\n                          >{{char}}</span>\n                        </div>\n                        <!--  Make sure there is NO space between the actual data and the span tag. Otherwise it will mess up the display format.-->\n                        <div class=\"spinner-border\" role=\"status\" v-if=\"!data_loaded\">\n                          <span class=\"sr-only\"></span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"alert alert-danger fade show\" role=\"alert\" v-if=\"has_event_error\">\n                    <strong>{{event_selection_error_message}}</strong>\n                  </div>\n\n                  <div class=\"card-body\">\n                    <p v-if=\"!staging.showing_qa_panel\">\n                      <strong>\n                        <span id=\"eventSelIns\">Double-click on events in the passage above (only single tokens).\n                        </span>\n                      </strong>\n                    </p>\n\n<!--                     <button\n                            type=\"button\"\n                            v-on:click=\"add_event\"\n                            v-if=\"!staging.showing_qa_panel\"\n                            class=\"btn btn-primary mt-2\"\n                            :disabled=\"is_selection_empty\"\n                    >\n                      Add Event [{{display_selected_text}}]\n                    </button> -->\n\n                    <div \n                      class=\"input-group mb-3\"\n                      v-if=\"!staging.showing_qa_panel\"\n                      >\n                      <input \n                      type=\"text\" \n                      class=\"form-control\" \n                      v-bind:value=\"display_selected_text\"\n                      placeholder=\"Event not selected\" \n                      aria-label=\"Recipient's username\" \n                      aria-describedby=\"basic-addon2\" disabled>\n                      <div class=\"input-group-append\">\n                        <button \n                          class=\"btn btn-primary\" \n                          type=\"button\"\n                          v-on:click=\"add_event\"\n                          :disabled=\"is_selection_empty\"                          \n                          >Add Event</button>\n                      </div>\n                      <div class=\"input-group-append\">\n                        <button \n                          class=\"btn btn-outline-danger\" \n                          type=\"button\"\n                          v-on:click=\"clear_selection\"\n                          data-balloon-pos=\"up\"\n                          aria-label=\"Clear selection\"                          \n                          >x</button>\n                      </div>\n                    </div>\n                 <!--    <div class=\"alert alert-danger\" role=\"alert\" v-if=\"has_event_error\">\n                      {{event_selection_error_message}}\n                    </div> -->\n\n                    <!-- <div class=\"card\"\n                         v-if=\"!staging.showing_qa_panel\"\n                    >\n                      <div class=\"card-body\">\n                        <p class=\"card-text\" style=\"height:25px;\">\n                          <button class=\"btn btn-danger\"\n                                  v-on:click=\"clear_selection\"\n                                  data-balloon-pos=\"up\"\n                                  aria-label=\"Clear selection\"\n                          >x</button>\n                          {{display_selected_text}}\n                        </p>\n                      </div>\n                    </div> -->\n\n                    <div\n                     v-if=\"!staging.showing_qa_panel\"\n                    >\n                      <div class=\"\"\n                           v-for=\"(event, idx) in sorted_staging_events\"\n                           v-bind:key=\"idx\"\n                      >\n                        <div class=\"card\">\n                          <div class=\"card-body\">\n                            <p class=\"card-text\">\n                              {{event_text(event)}}\n                              <!--{{event.start}}-->\n                              <!--{{event.end}}-->\n                            </p>\n                            <a\n                               class=\"card-link text-danger\"\n                               style=\"cursor: pointer\"\n                               v-on:click=\"delete_event(event)\"\n                            >\n                              Delete Event\n                            </a>\n                          </div>\n\n                        </div>\n\n                      </div>                      \n                    </div>\n\n\n                    <button\n                            type=\"button\"\n                            id=\"next_question-event\"\n                            class=\"btn btn-primary mt-4\"\n                            v-on:click=\"event_selection_button_clicked\"\n                    >\n                      {{event_selection_button_text}}\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              <!--Right panel for QA task-->\n              <div class=\"col-lg-8\" v-if=\"this.staging.showing_qa_panel\">\n\n                <div class=\"card\">\n                  <div class=\"card-body\">\n                    <div class=\"row\">\n                      <div class=\"col\">\n                        <h4>Write a question about temporal relations</h4>\n                        <input\n                                type=\"text\"\n                                class=\"form-control\"\n                                name=\"input-question\"\n                                placeholder=\"Write a question here! The more you ask, the more bonus you will receive.\"\n                                v-model=\"staging.current_question.text\"\n                                v-on:input=\"on_question_text_change\"\n                                :disabled=\"staging.current_question.is_default_question\"\n                        >\n                      </div>\n                    </div>\n\n                    <div class=\"alert alert-danger fade show\" role=\"alert\" v-if=\"has_qa_error\">\n                      <strong>{{qa_error_message}}</strong>\n                    </div>\n\n\n                    <div class=\"row mt-4\">\n                      <div class=\"col\">\n\n                        <h4>*All* valid answers from your event list</h4>\n\n                        Double-click to select events in the passage and they will appear in the box below.<br/>\n\n<!--                         <button\n                                type=\"button\"\n                                id=\"add_span\"\n                                class=\"btn btn-primary mt-2\"\n                                v-on:click=\"add_answer\"\n                                :disabled=\"is_selection_empty\"\n                        >\n                          Add Answer\n                        </button>\n                        <div class=\"card\">\n                          <div class=\"card-body\">\n                            <p class=\"card-text\" style=\"height:25px;\">\n                              <button class=\"btn btn-danger\"\n                                      v-on:click=\"clear_selection\"\n                                  data-balloon-pos=\"up\"\n                                  aria-label=\"Clear selection\"\n                              >x</button>\n                              {{display_selected_text}}\n                            </p>\n                          </div>\n                        </div> -->\n\n                      <div \n                        class=\"input-group mb-3\"\n                        >\n                        <input \n                        type=\"text\" \n                        class=\"form-control\" \n                        v-bind:value=\"display_selected_text\"\n                        placeholder=\"Event not selected\" \n                        aria-label=\"Recipient's username\" \n                        aria-describedby=\"basic-addon2\" disabled>\n                        <div class=\"input-group-append\">\n                          <button \n                            class=\"btn btn-primary\" \n                            type=\"button\"\n                            v-on:click=\"add_answer\"\n                            :disabled=\"is_selection_empty\"\n                            >Add Answer</button>\n                        </div>\n                        <div class=\"input-group-append\">\n                          <button \n                            class=\"btn btn-outline-danger\" \n                            type=\"button\"\n                            v-on:click=\"clear_selection\"\n                            data-balloon-pos=\"up\"\n                            aria-label=\"Clear selection\"                          \n                            >x</button>\n                        </div>\n                      </div>\n\n                        <div class=\"\"\n                             v-for=\"(event, idx) in staging.current_question.answers\"\n                             v-bind:key=\"idx\"\n                        >\n                          <div class=\"card\">\n                            <div class=\"card-body\">\n                              <p class=\"card-text\">\n                                {{event_text(event)}}\n                                <!--{{event.start}}-->\n                                <!--{{event.end}}-->\n                              </p>\n                              <a\n                                      class=\"card-link text-danger\"\n                                      style=\"cursor: pointer\"\n                                      v-on:click=\"delete_answer(event)\"\n                              >\n                                Delete Event\n                              </a>\n                            </div>\n\n                          </div>\n\n                        </div>\n                        <!--Show error messages-->\n                        <div>\n\n                        </div>\n\n                        <button\n                            type=\"button\"\n                            class=\"btn btn-primary mt-4\"\n                            v-on:click=\"add_question\"\n                            data-balloon-pos=\"up\"\n                            data-balloon-length=\"fit\"\n                            aria-label=\"We will validate your answers later; if you provide more reliable answers, you will receive extra bonus up to $50. (See details above)\">\n                          {{save_question_button_text}}\n                        </button>\n                      </div>\n                    </div>\n                    <!--<div class=\"row\"-->\n                    <!--&gt;-->\n                        <question-card\n                                v-for=\"(q, idx) in staging.questions\"\n                                v-bind:key=\"idx\"\n                                v-bind:question=\"q\"\n                                v-bind:answer_text=\"get_all_answer_surface_form(q)\"\n                                @delete=\"delete_question(q)\"\n                                @edit=\"edit_question(q)\"\n                                @derive=\"derive_question(q)\"\n                        ></question-card>\n                    <!--</div>-->\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!--Passage switching buttons-->\n      <div class=\"row mb-4\">\n        <div class=\"col text-center\">\n          <button\n                  type=\"button\"\n                  class=\"btn btn-primary\"\n                  v-on:click=\"previous_passage\"\n                  :disabled=\"prev_passage_disabled\"\n                  data-balloon-pos=\"up\"\n                  data-balloon-length=\"fit\"\n                  aria-label=\"You can move back and forth without losing your annotations. However, do not refresh this page using the refresh button of your browser.\">\n            Previous Passage\n          </button>\n          <button\n                  type=\"button\"\n                  class=\"btn btn-primary\"\n                  v-on:click=\"next_passage\"\n                  :disabled=\"next_passage_disabled\"\n                  data-balloon-pos=\"up\"\n                  data-balloon-length=\"fit\"\n                  aria-label=\"Reminder: Please ask a similar number of questions per passage instead of asking a lot on a specific one while ignoring other passages.\">\n            Next Passage\n          </button>\n        </div>\n      </div>\n\n      <!-- Feedback inputs-->\n      <div class=\"row\">\n        <div class=\"col\">\n          <div class=\"card mb-4\">\n            <div class=\"card-header\">\n              <h3>\n                Please leave your feedback here\n              </h3>\n            </div>\n            <div class=\"card-body\">\n              <div id=\"comment\">\n                <textarea\n                        rows=\"3\"\n                        class=\"form-control\"\n                        placeholder=\"Please leave your feedback here.\"\n                        v-model=\"feedback\">\n                </textarea>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!--Submit button-->\n      <div class=\"row mb-4\">\n        <div class=\"col text-center\">\n          <button\n                  id=\"ready_submit\"\n                  type=\"button\"\n                  class=\"btn btn-secondary\"\n                  v-on:click=\"check_before_submit\"\n                  :disabled=\"submit_disabled\">\n            Ready to Submit HIT and Scroll Down\n          </button>\n        </div>\n      </div>\n\n      <div class=\"alert alert-danger fade show\" role=\"alert\" v-if=\"has_submission_error\">\n        <strong>{{submission_error_msg}}</strong>\n      </div>\n\n      <!--Submission forms-->\n      <!-- action='https://www.mturk.com/mturk/externalSubmit' -->\n      <form\n              name='mturk_form'\n              method='post'\n              id='mturk_form'\n              v-bind:action=\"mturk_params.turkSubmitTo\"\n              v-bind:class=\"{hidden: submission_not_ready}\"\n      >\n        <input type='hidden' name='assignmentId' id='assignmentId' v-bind:value=\"mturk_params.assignmentId\"/>\n        <input id=\"generated_answers\" name=\"generated_answers\" type=\"hidden\" v-model=\"generated_answers\">\n        <input id=\"generated_answers_event\" name=\"generated_answers_event\" type=\"hidden\" v-model=\"generated_answers_event\">\n        <input type='submit' class=\"btn btn-success\" id='submitButton' name=\"submitButton\" disabled value='Submit HIT'>\n      </form>\n\n    </div>\n</template>\n\n<script>\nimport _ from \"lodash\"\nimport DataHandler from \"./data_handler.js\"\nimport QuestionCard from \"./components/QuestionCard\"\nimport Vue from 'vue'\nimport queryString from \"query-string\";\n\nconst question_keywords = ['before','after','since','when','until','earlier','later','while','during','meanwhile','meantime','in the future', 'in the past','what happens','start','begin','began','begun','end','stop'];\nconst default_questions = ['what has happened?', 'what happened?', 'what has happened so far?', 'what is happening?', 'what is happening now?', 'what is happening right now?', 'what will happen?', 'what will happen in the future?', 'what may happen in the future?', 'what may happen?', 'what might happen?', 'what might happen in the future?'];\nconst bad_question_keywords = [' causes', ' caused', ' cause', 'because ', ' lead to', ' led to', ' leads to'];\n\n\nexport default {\n  name: 'AnnotationInterface',\n  components: {\n    'question-card': QuestionCard\n  },\n  data: function(){\n    return {\n\n      required_question_count: 4,\n\n      data_loaded: false, // Oneway flag.\n\n      //We have methods that modify this data in an unwatched way, so HTML rendering should no reply\n      // on anything from this object. Use render use staging object instead.\n      annotations: {},\n\n      /**\n       * {\n       *     passage_id: {\n       *         events: [(0, 10), (56, 62)],\n       *         questions: {\n       *             qid: {\n       *                    question_id,\n       *                    isDefaultQuestion: true,\n       *                    isAnswered: true,\n       *                    answer: [(0, 10)],\n       *                    text: []\n       *                  }\n       *         }\n       *     }\n       * }\n       */\n\n      // Current data displayed on interface.\n      current: {\n        selection_state: \"none\",\n        selection: {\n          start: -1,\n          end: -1,\n          current: -1,\n        },\n\n        selected_char_indices: {\n\n        },\n\n\n        selected_char_indices_for_answers: {\n\n        },\n\n\n\n        // Should never decrease.\n        question_id_counter : 0,\n\n        // faithful counter of how many question created.\n        question_created: 0,\n\n        default_question_count: 0,\n        default_question_answered_count: 0,\n      },\n/**\n*      Staging data for current passage.\n*/\n      // Staged annotations.\n      staging: {\n        showing_qa_panel: false,\n        passage_id: -1,\n        passage: \"\",\n\n        current_question: {\n          question_id: null,\n          text: \"\",\n          is_default_question: false,\n          answers:{},\n          question_is_derived_from: null,\n        },\n\n        events: {},\n        questions: {},\n        //   Example questions format.\n        //   qid: {\n        //      question_id: \"\",\n        //      isDefaultQuestion: true,\n        //      isAnswered: true,\n        //      answer: [(0, 10)],\n        //      text: \"\"\n        //   }\n      },\n\n/**\n *      Misc data.\n */\n      feedback: \"\",\n      pay_base_amount: 8.0,\n\n/**\n *      Error reporting related data.\n */\n      event_selection_error_message : \"\",\n      has_event_error: false,\n\n      qa_error_message : \"\",\n      has_qa_error: false,\n\n      submission_error_msg :\"\",\n      has_submission_error:false,\n\n\n/**\n *      Submission form control data.\n */\n      submission_not_ready: true,\n      generated_answers: \"\",\n      generated_answers_event: \"\",\n\n      mturk_params: {\n        assignmentId: \"\",\n        hitId: \"\",\n        turkSubmitTo: \"\",\n        workerId: \"\",\n        isPreview: true,\n      }\n    };\n  },\n\n  mounted: async function(){\n    // Parse the current query string.\n    console.log(location.search);\n    const parsed_query_string = queryString.parse(location.search);\n    console.log(parsed_query_string);\n    \n    const assignmentId = parsed_query_string.assignmentId;\n\n    if (assignmentId === \"ASSIGNMENT_ID_NOT_AVAILABLE\"){\n      console.log(\"Preview mode.\");\n      this.mturk_params.isPreview = true;\n    }\n\n    const hitId = parsed_query_string.hitId;\n    const turkSubmitTo = parsed_query_string.turkSubmitTo;\n    const workerId = parsed_query_string.workerId;\n\n    this.mturk_params.turkSubmitTo = turkSubmitTo + \"mturk/externalSubmit\";\n    this.mturk_params.workerId = workerId;\n    this.mturk_params.hitId = hitId;\n\n\n\n\n    const self = this;\n    const passages = await DataHandler.fetchPassagesWithRetries(3);\n    console.log(passages);\n\n\n\n    _.each(passages, (passage, idx) => {\n      const passage_id = idx;\n      const real_passage_id = passage.passage_id;\n\n      let questions = {};\n      questions[passage_id + \"-question-d0\"] =  {\n        question_id: passage_id + \"-question-d0\",\n        is_default_question: true,\n        question_is_derived_from: null,\n        is_answered: false,\n        answers: {},\n        text: \"What happened?\",\n      };\n\n      questions[passage_id + \"-question-d1\"] =  {\n        question_id: passage_id + \"-question-d1\",\n        is_default_question: true,\n        question_is_derived_from: null,\n        is_answered: false,\n        answers: {},\n        text: \"What is happening?\",\n      };\n\n      questions[passage_id + \"-question-d2\"] =  {\n        question_id: passage_id + \"-question-d2\",\n        is_default_question: true,\n        question_is_derived_from: null,\n        is_answered: false,\n        answers: {},\n        text: \"What might happen in the future?\",\n      };\n\n      self.current.default_question_count += Object.keys(questions).length;\n\n      self.annotations[idx] = {\n        passage: passage.passage,\n        doc_id: passage.doc_id,\n        sent_id: passage.sent_id,\n        events: {},\n        questions: questions,\n        passage_id: real_passage_id,\n      };\n    });\n\n    this.data_loaded = true;\n    this.stage_new_passage(0);\n\n  },\n  computed: {\n\n    sorted_staging_events: function(){\n      let ret = _.sortBy(Object.values(this.staging.events), [\n        event => {\n          return event.start\n        },\n        event => {\n          return event.end\n        }\n      ]);\n      return ret;\n    },\n\n    event_selection_button_text: function(){\n      if (this.staging.showing_qa_panel){\n        return \"Edit Event Selection\";\n      }else{\n        return \"Finish Selection\";\n      }\n    },\n\n    save_question_button_text: function(){\n      if (this.staging.current_question.question_id !== null){\n        return \"Save Question\";\n      }\n\n      if (this.staging.current_question.question_is_derived_from !== null){\n        return \"Add New Derived Question\";\n      }\n\n      return \"Add Question\";\n\n    },\n\n\n    /**\n     * If the submit button should be disabled.\n     * @returns {boolean}\n     */\n    submit_disabled: function(){\n      return false;\n    },\n\n    /**\n     * If the Next passage button is disabled.\n     * @returns {boolean}\n     */\n    next_passage_disabled: function(){\n      return false;\n    },\n\n\n    /**\n     * If the Previouse passage button is disabled.\n     * @returns {boolean}\n     */\n    prev_passage_disabled: function(){\n      return false;\n    },\n\n    /**\n     * How many questions has the user created.\n     * @returns {number}\n     */\n\n    pay_bonus_amount: function(){\n      return Math.max(0, 0.5 * (this.current.question_created - this.required_question_count));\n    },\n\n    pay_total_amount: function(){\n      return this.pay_bonus_amount + this.pay_base_amount;\n    },\n\n    /**\n     * Display the current selection, if the current selection is too long, it will only show the first 19 chars.\n     */\n    display_selected_text: function(){\n      if (this.current.selection.start >= 0 && this.current.selection.end >= 0){\n        let surface = this.staging.passage.substring(this.current.selection.start, this.current.selection.end+1);\n        if (surface.length > 20){\n          return surface.substring(0, 19) + \" ...\";\n        }\n        return surface;\n      }else{\n        return \"\";\n      }\n    },\n\n    is_selection_empty: function(){\n      return (this.current.selection.start === -1) || (this.current.selection.end === -1);\n    }\n  },\n\n  methods: {\n\n    /**\n     *\n     * Functions that handles error messages.\n     *\n     */\n\n    hide_event_error: function(){\n      this.has_event_error = false;\n    },\n\n    hide_qa_error: function(){\n      this.has_qa_error=false;\n    },\n\n    hide_submission_error: function(){\n      this.has_submission_error=false;\n    },\n\n    show_event_error: function(msg){\n      this.event_selection_error_message = msg;\n      this.has_event_error = true;\n    },\n\n    show_qa_error: function(msg){\n      this.qa_error_message = msg;\n      this.has_qa_error=true;\n    },\n\n    show_submission_error: function(msg){\n      this.submission_error_msg = msg;\n      this.has_submission_error=true;\n    },\n    /**\n     *\n     * Highlight related functions\n     *\n     */\n\n    reset_highlight_map: function(){\n      for (let i = 0; i < this.staging.passage.length; i++) {\n        Vue.set(this.current.selected_char_indices, i, false);\n        Vue.set(this.current.selected_char_indices_for_answers, i, false);\n      }\n    },\n\n\n    /**\n     *\n     * Functions for handling event selections.\n     *\n     */\n    event_text: function(event){\n      return this.staging.passage.substring(event.start, event.end+1);\n    },\n\n    is_event_text_single_token: function(){\n      let start = this.current.selection.start;\n      let end = this.current.selection.end;\n\n      if(this.staging.passage.substring(start, end+1).trim().includes(\" \")){\n        return false;\n      }\n\n      return true;\n    },\n\n    can_add_event: function(event){\n      \n      let surface = this.staging.passage.substring(event.start, event.end+1);\n      if(surface.length === 0){\n        this.show_event_error(\"The is event empty.\");\n        return false;\n      }\n\n      if(!this.is_event_text_single_token()){\n        this.show_event_error(\"The correct event should be a single word\");\n        return false;\n      }\n\n      // By design, we cannot add any duplicated events as answers to the same questinos.\n      // So we don't have to check for this case.\n      if(event.key in this.staging.events && this.staging.events[event.key] !== null){\n        this.show_event_error(\"This answer is duplicated!\");\n        return false;\n      }\n\n      this.hide_event_error();\n      return true;\n    },\n\n    trim_start_end_to_nearest_space: function(){\n      const old_start = this.current.selection.start;\n      const old_end = this.current.selection.end;\n      let new_start = old_start;\n      let new_end = old_end;\n\n      for(let i = old_start; i <= old_end; i++){\n          if (this.staging.passage.charAt(i) !== \" \"){\n            new_start = i;\n            break;\n          }\n      }\n\n      for(let i = old_end; i >= old_start; i--){\n          if (this.staging.passage.charAt(i) !== \" \"){\n            new_end = i;\n            break;\n          }\n      }\n\n      this.current.selection.start = new_start;\n      this.current.selection.end = new_end;\n    },\n\n    add_event: function(){\n\n      this.trim_start_end_to_nearest_space();\n\n      let start = this.current.selection.start;\n      let end = this.current.selection.end;\n      let event_key = start + \"_\" + end;\n\n      const event = {start, end, key: event_key};\n\n      if (!this.can_add_event(event)){\n          return false;\n      }\n\n      \n      Vue.set(this.staging.events, event_key, event);\n      this.current.selection.start = -1;\n      this.current.selection.end = -1;\n      this.current.selection.current = -1;\n      this.current.selection.state = \"none\";\n      return true;\n    },\n\n    delete_event: function(event){\n      this.$delete(this.staging.events, event.key);\n    },\n\n    should_highlight: function(index){\n      return this.current.selected_char_indices[index] === true;\n    },\n\n\n    event_selection_button_clicked(){\n\n      this.clear_selection();\n\n      if(!this.staging.showing_qa_panel){\n        // Currently not showing QA panel.\n        // this.add_event();\n        for (const key in this.staging.events){\n          const event = this.staging.events[key];\n          for(let i = event.start; i <= event.end; i++){\n            Vue.set(this.current.selected_char_indices, i, true);\n          }\n        }\n      }else{\n        for(let i = 0; i <= this.staging.passage.length; i++){\n          Vue.set(this.current.selected_char_indices, i, false);\n        }\n      }\n      this.staging.showing_qa_panel = !this.staging.showing_qa_panel;\n    },\n\n\n\n    /**\n     *\n     *\n     * Functions for modifying current answers.\n     *\n     *\n     */\n\n    is_answer_not_event: function(){\n      let start = this.current.selection.start;\n      let end = this.current.selection.end;\n      let event_key = start + \"_\" + end;\n\n      if (!this.staging.events.hasOwnProperty(event_key)){\n        return true;\n      }\n\n      return false;\n    },\n\n    can_add_answer: function(){\n      if(this.current.selection.start === -1 || this.current.selection.end === -1){\n        this.show_qa_error(\"The answer cannot be empty!\");\n        return false;\n      }\n\n      if (this.staging.current_question.text.length === 0){\n        this.show_qa_error(\"This question is empty\");\n        return false;\n      }\n\n\n      // By design, we cannot add any duplicated events as answers to the same questinos.\n      // So we don't have to check for this case.\n      // if(this.is_answer_duplicated()){\n      //   this.show_qa_error(\"This answer is duplicated!\");\n      //   return false;\n      // }\n\n      if(this.is_answer_not_event()){\n        this.show_qa_error(\"Choose an answer from highlighted events! If you're sure of your answer, you can first add it to the event list by clicking the 'Edit Event Selection' button on the left!\");\n        return false;\n      }\n\n      this.hide_qa_error();\n      return true;\n    },\n\n    add_answer: function(){\n      if(this.can_add_answer()){\n        let start = this.current.selection.start;\n        let end = this.current.selection.end;\n        let event_key = start + \"_\" + end;\n        const event = {start, end, key: event_key};\n        console.log(event_key);\n        Vue.set(this.staging.current_question.answers, event_key, event);\n\n        console.log(\"Updating highlight map.\");\n        // Highlight the spans.\n        for(let i = start; i <= end; i++){\n          Vue.set(this.current.selected_char_indices_for_answers, i, true);\n        }\n      }else{\n        console.log(\"Cannot add answer.\");\n      }\n    },\n\n    delete_answer: function(event){\n      this.$delete(this.staging.current_question.answers, event.key);\n      for(let i = event.start; i <= event.end; i++){\n        Vue.set(this.current.selected_char_indices_for_answers, i, false);\n      }\n    },\n\n    is_selected_answer_highlight: function(idx){\n      return this.current.selected_char_indices_for_answers[idx] === true;\n    },\n\n    highlight_selected_answer: function(start, end){\n      for(let i = start; i <= end; i++){\n        Vue.set(this.current.selected_char_indices_for_answers, i, true);\n      }\n    },\n\n\n    /**\n     */\n\n    is_question_suspicious: function(){\n      let trimmedQuestion = this.staging.current_question.text.toLowerCase();\n      // must not include the following words\n      for (let id in bad_question_keywords){\n        const keyword = bad_question_keywords[id];\n        if (trimmedQuestion.includes(keyword)){\n          return true;\n        }\n      }\n\n      // must not be one of the default questions\n      for (let id in default_questions){\n        const keyword = default_questions[id];\n        if (trimmedQuestion.includes(keyword)){\n          return true;\n        }\n      }\n\n      // must ends with ?\n      // if(!trimmedQuestion.endsWith('?'))\n      //   return true;\n\n      // must include one or more of the following words\n      for (let id in question_keywords){\n        const keyword = question_keywords[id];\n        if (trimmedQuestion.includes(keyword)){\n          return false;\n        }\n      }\n\n      return true;\n\n    },\n\n    on_question_text_change: function(){\n      if(this.is_question_suspicious()){\n       this.show_qa_error(\"This question is suspicious and fails to pass our auto-checker! You can still add it if you're sure.\");\n      }else{\n        if (!this.staging.current_question.text.endsWith(\"?\")){\n          this.show_qa_error('You may forget to put \"?\" at the end of the question.');\n        }else{\n          this.hide_qa_error();\n        }\n\n      }\n    },\n    /**\n     *\n     * Save current question to staging area. This should update the question cards.\n     *\n     */\n\n    current_question_is_duplicated: function(){\n      for(const key in this.staging.questions){\n        if (key === this.staging.current_question.question_id){\n          // We are editing the existing question, we don't have to check it with the existing one.\n          continue;\n        }\n        const question = this.staging.questions[key];\n        if (this.staging.current_question.text === question.text){\n          return true;\n        }\n      }\n      return false;\n    },\n\n    can_add_question: function(){\n      if (this.staging.current_question.text.length === 0){\n        this.show_qa_error(\"This question is empty\");\n        return false;\n      }\n\n      if(this.current_question_is_duplicated()){\n        this.show_qa_error(\"This question is the same as an existing one!\");\n        return false;\n      }\n\n      /**\n       * Check for duplicated questions.\n       */\n\n\n      this.hide_qa_error();\n      return true;\n    },\n\n    get_new_question_id: function(){\n      const ret = this.current.question_id_counter;\n      this.current.question_id_counter = this.current.question_id_counter + 1;\n      return this.staging.passage_id + \"-question-\" + ret;\n    },\n\n    add_question: function(){\n      if(this.can_add_question()){\n          let question_id = this.staging.current_question.question_id;\n          let is_new_question = false;\n\n          if (question_id === null){\n            question_id = this.get_new_question_id();\n            is_new_question = true;\n          }\n\n          if (this.staging.current_question.is_default_question){\n            this.current.default_question_answered_count = this.current.default_question_answered_count + 1;\n          }\n\n          Vue.set(this.staging.questions, question_id, {\n            question_id: question_id,\n            is_default_question: this.staging.current_question.is_default_question,\n            is_answered: true,\n            answers: _.cloneDeep(this.staging.current_question.answers),\n            text: this.staging.current_question.text,\n            question_is_derived_from: this.staging.current_question.question_is_derived_from,\n          });\n\n          if (is_new_question){\n            this.current.question_created = this.current.question_created + 1;\n          }\n\n        // Now we reset the working questions.\n        this.staging.current_question.text = \"\";\n        this.staging.current_question.is_default_question = false;\n        this.staging.current_question.question_id = null;\n        this.staging.current_question.question_is_derived_from = null;\n        this.staging.current_question.answers = {};\n        this.clear_current_answer_highlight();\n\n      }else{\n        console.log(\"Cannot add question.\");\n      }\n    },\n\n    clear_current_answer_highlight: function(){\n        for(let i = 0; i <= this.staging.passage.length; i++){\n          Vue.set(this.current.selected_char_indices_for_answers, i, false);\n        }\n    },\n\n    /**\n     *\n     * Handlers for buttons on question cards.\n     *\n     */\n    delete_question: function(question){\n      const question_id = question.question_id;\n\n      this.$delete(this.staging.questions, question_id);\n      this.current.question_created = this.current.question_created - 1;\n    },\n\n    derive_question: function(question){\n      this.clear_current_answer_highlight();\n\n      const question_id = question.question_id;\n\n      this.staging.current_question.question_id = null;\n      this.staging.current_question.text = question.text;\n      this.staging.current_question.is_default_question = question.is_default_question;\n      this.staging.current_question.question_is_derived_from = question_id;\n      this.staging.current_question.answers = {};\n    },\n\n    edit_question: function(question){\n      this.clear_current_answer_highlight();\n\n      const question_id = question.question_id;\n\n      this.staging.current_question.question_id = question_id;\n      this.staging.current_question.text = question.text;\n      this.staging.current_question.is_default_question = question.is_default_question;\n      this.staging.current_question.question_is_derived_from = null;\n      this.staging.current_question.answers = _.cloneDeep(question.answers);\n      for (const key in question.answers){\n        const event = question.answers[key];\n        this.highlight_selected_answer(event.start, event.end);\n      }\n    },\n\n    /**\n     * Functions that help question card display.\n     */\n    get_all_answer_surface_form: function(question){\n      const answers = question.answers;\n      if (Object.keys(answers).length === 0){\n        return \"No Events.\"\n      }else{\n\n        let answers_surface = [];\n\n        for(const key in answers){\n          const answer = answers[key];\n          answers_surface.push(\n                  this.staging.passage.substring(answer.start, answer.end+1)\n          );\n        }\n\n\n        return _.join(answers_surface, ', ');\n      }\n    },\n\n    /**\n     * Submit user annotations to server.\n     */\n\n    can_submit_fast_check: function(){\n\n      if(this.current.question_created < this.required_question_count){\n        this.show_submission_error(`You have created only ${this.current.question_created} questions, which is less than the required ${this.required_question_count}. (Default questions do not count)`);\n        return false;\n      }\n\n      if(this.current.default_question_answered_count < this.current.default_question_count){\n        const diff = this.current.default_question_count - this.current.default_question_answered_count;\n        this.show_submission_error(`You have ${diff} default questions unanswered, you must answer all of them.`);\n        return false;\n      }\n\n      return true;\n    },\n\n    create_submission_object: function(){\n      let pass_check = true;\n\n      let generated_events = {};\n      let generated_qas = {\n        feedback: this.feedback\n      };\n\n      // Do another check to make sure we have enough data to submit.\n      let default_question_answered_count = 0;\n      let question_count = 0;\n\n      for (const key in this.annotations){\n        const passage = this.annotations[key];\n\n        const passage_id = passage.passage_id;\n        const passage_text = passage.passage;\n\n        const event_response = {\n          answer: {\n            spans: [],\n            indices: [],\n          },\n          passageID: passage_id,\n        };\n\n\n        const annotated_events = passage.events;\n        const annotated_qas = passage.questions;\n\n        for(const qkey in annotated_qas){\n          const question = annotated_qas[qkey];\n\n          if (!question.is_answered){\n            pass_check = false;\n          }\n\n          if (question.is_default_question){\n            if (question.is_answered){\n              default_question_answered_count++;\n            }\n          }else{\n            question_count++;\n          }\n\n          const question_annotation = {\n            question: question.text,\n            answer: {\n              spans: [],\n              indices: [],\n            },\n            passageID: passage_id,\n            isAnswered: question.is_answered,\n            is_default_question: question.is_default_question,\n            derived_from: question.question_is_derived_from,\n          };\n\n          for(const ekey in question.answers){\n            const event = question.answers[ekey];\n            question_annotation.answer.indices.push(`(${event.start},${event.end})`);\n            question_annotation.answer.spans.push(passage_text.substring(event.start, event.end));\n          }\n\n          generated_qas[qkey] = question_annotation;\n        }\n\n        for(const ekey in annotated_events){\n          const event = annotated_events[ekey];\n          event_response.answer.indices.push(`(${event.start},${event.end})`);\n          event_response.answer.spans.push(passage_text.substring(event.start, event.end));\n        }\n\n        const event_key = key + \"-allEvents\";\n        generated_events[event_key] = event_response;\n        // question_id: passage_id + \"-question-d1\",\n        // is_default_question: true,\n        // question_is_derived_from: null,\n        // is_answered: false,\n        // answers: {},\n        // text: \"What is happening?\",\n      }\n\n      if (default_question_answered_count < 12){\n        console.log(\"default_question_answered_count : \", default_question_answered_count)\n      }\n\n      if (question_count < this.required_question_count){\n        console.log(\"question_count : \", question_count )\n      }\n\n      if (pass_check) {\n        console.log(\"Passed check, ready to submit now.\");\n        this.generated_answers = JSON.stringify(generated_qas);\n        this.generated_answers_event = JSON.stringify(generated_events);\n        this.submission_not_ready = false;\n\n        this.hide_submission_error();\n\n        console.log(this.generated_answers);\n        console.log(this.generated_answers_event);\n      }else{\n        console.log(\"Check not passed.\");\n        this.show_submission_error(`You may have unanswered questions.`);\n      }\n    },\n\n    check_before_submit: function(){\n      console.log(this.annotations);\n      console.log(this.feedback);\n\n      this.create_submission_object();\n\n      if(this.can_submit_fast_check()){\n          this.create_submission_object();\n      }\n\n    },\n\n    /**\n     *\n     * Functions for handling passage switching.\n     *\n     */\n\n    previous_passage: function(){\n      const passage_id = Math.max(this.staging.passage_id-1, 0);\n      if (passage_id === this.staging.passage_id){\n        return;\n      }\n\n      this.save_staged_passage();\n      this.stage_new_passage(passage_id);\n    },\n\n    next_passage: function(){\n\n      const passage_id = Math.min(this.staging.passage_id+1, Object.keys(this.annotations).length - 1);\n      if (passage_id === this.staging.passage_id){\n        return;\n      }\n\n      this.save_staged_passage();\n      this.stage_new_passage(passage_id);\n    },\n\n\n    stage_new_passage: function(passage_id){\n      this.clear_selection();\n      this.reset_highlight_map();\n      this.staging.passage_id = passage_id;\n      const annotation = this.annotations[passage_id];\n\n      this.staging.passage = annotation.passage;\n      this.staging.questions = annotation.questions;\n      this.staging.events = annotation.events;\n    },\n    /**\n     * Save whatever user has changed.\n     */\n    save_staged_passage: function(){\n      const existing_annotation = this.annotations[this.staging.passage_id];\n      existing_annotation.events = this.staging.events;\n      existing_annotation.questions = this.staging.questions;\n    },\n\n    /*************************************************************************************\n     *\n     * Below methods are used to handling span selections.\n     *\n     ************************************************************************************/\n\n    mousedown_text: function(index){\n      this.current.selection.start = index;\n      this.current.selection.state = \"selecting\";\n    },\n\n    mouseup_text: function(index){\n      this.current.selection.end = index;\n      this.current.selection.state = \"none\";\n      let _start = Math.min(this.current.selection.start, this.current.selection.end);\n      let _end = Math.max(this.current.selection.start, this.current.selection.end);\n      this.current.selection.start = _start;\n      this.current.selection.end = _end;\n    },\n\n    mouseenter_text: function(index){\n      this.current.selection.current = index;\n    },\n\n    /**\n     * invalidate the current selection, this happens when mouse moved out of the selection scope.\n     */\n    invalidate_selection: function(){\n      if (this.current.selection.state !== \"none\"){\n        this.clear_selection();\n      }\n\n    },\n\n    /**\n     * Should the current char be highlighted as part of the selection process?\n     */\n    is_in_selection_highlight: function(idx){\n      if(this.current.selection.state === \"selecting\"){\n          return (idx >= Math.min(this.current.selection.current, this.current.selection.start)) && (idx <= Math.max(this.current.selection.current, this.current.selection.start))\n      }\n\n      if(this.current.selection.state === \"none\"){\n        return (idx >= this.current.selection.start) && (idx <= this.current.selection.end);\n      }\n\n      return false;\n\n    },\n    /**\n     * When double click on a char, it automatically expand to the entire word.\n     */\n    double_clicked_text: function(index){\n      function shouldStop(char){\n        return char === \" \" || char === \".\" ||\n                char === \",\" || char === \"?\" ||\n                char === \"'\" || char === '\"' ||\n                char === \"!\" || char === \";\" ||\n                char === \":\"\n                ;\n      }\n      let end = this.staging.passage.length - 1;\n      for (let i = index; i < this.staging.passage.length; i++){\n        if(shouldStop(this.staging.passage[i])){\n          end = i - 1;\n          break;\n        }\n      }\n\n      let start = 0;\n      for (let i = index; i > 0; i--){\n        if(shouldStop(this.staging.passage[i])){\n          start = i + 1;\n          break;\n        }\n      }\n      this.current.selection.start = start;\n      this.current.selection.end = end;\n    },\n\n    clear_selection: function(){\n      this.current.selection.state = \"none\";\n      this.current.selection.start = -1;\n      this.current.selection.end = -1;\n      this.current.selection.current = -1;\n    },\n\n  },\n\n  /**\n   * For display formatting.\n   */\n  filters: {\n    currency: function(value){\n      return value.toFixed(2);\n    }\n  },\n\n}\n</script>\n\n<style>\n.noselect {\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -moz-user-select: none; /* Old versions of Firefox */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  user-select: none; /* Non-prefixed version, currently\n                                supported by Chrome, Opera and Firefox */\n}\n\n.passage-display-box span.highlight{\n  background: yellow;\n}\n\n.passage-display-box .passage-text span{\n  cursor: text\n}\n/*.passage-display-box span:hover{*/\n  /*background: lightskyblue;*/\n/*}*/\n\n.passage-display-box span.select_highlight{\n  background: lightskyblue;\n}\n\nform.hidden {\n  display: none;\n}\n\n.passage-display-box span.is_selected_answer{\n  color: red;\n  font-style: italic;\n  border-bottom: thick solid rgb(0, 0, 255);\n}\n\ndiv.inline_div{\n  display: inline;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=c23d5068&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app');\n","const NUM_PASSAGES = 4;\n\n\nfunction chooseKfromArray(k, values) {\n    var indexArray = [];\n    for (let i = 0; i < values.length; i++) {\n        indexArray.push(i);\n    }\n\n    indexArray.sort(function(){\n        return 0.5 - Math.random();\n    });\n\n    let ret = [];\n\n    if (k > values.length){\n        k = values.length;\n    }\n\n    for (let i = 0; i < k; i++) {\n        let idx = indexArray[i];\n        ret.push(values[idx]);\n    }\n\n    return ret;\n}\n\nfunction get_offline_contents() {\n    let passage_data = `Tom falls in love with Becky Thatcher, a new girl in town, and persuades her to get \"engaged\" by kissing him. But their romance collapses when she learns Tom has been \"engaged\" previously to Amy Lawrence. Becky cries for a great deal of time until the other students begin to notice, and she becomes embarrassed. Shortly after Becky shuns him, he accompanies Huckleberry Finn to the graveyard at night, where they witness a trio of body snatchers, Dr. Robinson, Muff Potter, and Injun Joe, getting into a fight in which Robinson is murdered by Injun Joe. Tom and Huckleberry Finn swear a blood oath to not tell anyone about the murder, as they feel that if they do, Injun Joe would murder them.\n    Natasha visits the Moscow opera, where she meets Hlne and her brother Anatole. Anatole has since married a Polish woman whom he has abandoned in Poland. He is very attracted to Natasha and determined to seduce her, and conspires with his sister to do so. Anatole succeeds in making Natasha believe he loves her, eventually establishing plans to elope. Natasha writes to Princess Maria, Andrei's sister, breaking off her engagement. At the last moment, Sonya discovers her plans to elope and foils them. Natasha learns from Pierre of Anatole's marriage. Devastated, Natasha makes a suicide attempt and is left seriously ill.\n    Alex is a 15-year-old living in near-future dystopian England who leads his gang on a night of opportunistic, random \"ultra-violence\". Alex's friends (\"droogs\" in the novel's Anglo-Russian slang, 'Nadsat') are Dim, a slow-witted bruiser who is the gang's muscle; Georgie, an ambitious second-in-command; and Pete, who mostly plays along as the droogs indulge their taste for ultra-violence. Characterised as a sociopath and hardened juvenile delinquent, Alex also displays intelligence, quick wit, and a predilection for classical music; he is particularly fond of Beethoven, referred to as \"Lovely Ludwig Van\". The novella begins with the droogs sitting in their favourite hangout, the Korova Milk Bar, and drinking \"milk-plus\"  a beverage consisting of milk laced with the customer's drug of choice  to prepare for a night of mayhem. They assault a scholar walking home from the public library; rob a store, leaving the owner and his wife bloodied and unconscious; beat up a beggar; then scuffle with a rival gang. Joyriding through the countryside in a stolen car, they break into an isolated cottage and terrorise the young couple living there, beating the husband and raping his wife.\n    In March 1997, Maj. Jack Reacher is briefed by his superior Leon Garber on a troubling development in Carter's Crossing, Mississippi: a woman has been found murdered, her throat slit, with signs of rape, and the military is concerned that one of the potential suspects seems to be Cpt. Reed Riley, a commander at Fort Kelham, a nearby Army Ranger base, with a reputation as a ladykiller. Garber informs Reacher that another MP, Maj. Duncan Munro, has been assigned to investigate the murder; his job is to go undercover and ensure that Munro's investigation doesn't damage the military's public image. He also puts Reacher in touch with Col. James John Frazer, a Senate liaison who warns Reacher that Reed's father, Senator Carlton Riley, a member of the Armed Services Committee, is threatening to impose harsh budget cuts on the army if his son is targeted. Posing as a drifter, Reacher takes up residence in a local inn and goes for a meal, where he meets the local sheriff, Elizabeth Deveraux. A former Marine, she quickly deduces Reacher's true identity and purpose, but permits him to stay as long as he doesn't interfere with her investigation. Reacher does so anyway, and learns that the dead woman, Janice Chapman, was the third woman murdered in Carter's Crossing in just the last few months; the other two were young women from the poorer, largely African American section of town. Reacher's old friend Sgt. Frances Neagley arrives with a warning to stay away from Deveraux, who she claims was dishonorably discharged from the service following an incident with a fellow Marine, but Jack disregards her advice.\n    Agnes Grey is the daughter of Mr. Grey, a minister of modest means, and Mrs. Grey, a woman who left her wealthy family and married purely out of love. Mr. Grey tries to increase the family's financial standing, but the merchant he entrusts his money to dies in a wreck, and the lost investment plunges the family into debt. Agnes, her sister Mary, and their mother all try to keep expenses low and bring in extra money, but Agnes is frustrated that everyone treats her like a child. To prove herself and to earn money, she is determined to get a position as a governess. Eventually, she obtains a recommendation from a well-placed acquaintance, is offered a position, and secures her parents' permission. With some misgivings, she travels to Wellwood house to work for the Bloomfield family. The Bloomfields are rich and much crueller than Agnes had expected. Mrs. Bloomfield spoils her children while Mr. Bloomfield constantly finds fault with Agnes's work. The children are unruly and Agnes is held accountable for them despite being given no real authority over them. Tom, the oldest Bloomfield child, is particularly abusive and even tortures small animals. In less than a year, Agnes is relieved of her position, since Mrs. Bloomfield thinks that her children are not learning quickly enough. Agnes returns home.`;\n    let passage_ids = [577, 41, 363, 767, 318];\n    return {\n        passage_ids: passage_ids,\n        passage_data: passage_data.split('\\n')\n    };\n}\n\nfunction loadErrorPassages() {\n    let passages = get_offline_contents();\n    return passages;\n}\n\nasync function parsePassages(response) {\n    if (response.status !== 200) {\n        console.log('Looks like there was a problem. Status Code: ' +\n            response.status);\n        return loadErrorPassages();\n    }\n\n    const data = await response.json();\n\n    let all_passage_ids = Object.keys(data);\n    let selected_passages = chooseKfromArray(NUM_PASSAGES, all_passage_ids);\n    // Get NUM_PASSAGES random passages to show the user.\n\n    let ret = [];\n\n    for (let i = 0; i < selected_passages.length; i++) {\n        let passage_id = selected_passages[i];\n        const passage = data[passage_id];\n        passage[\"passage_id\"] = passage_id;\n        ret.push(passage);\n        console.log(passage);\n    }\n\n    return ret;\n}\n\nasync function fetchPassagesWithRetries(n) {\n    let data_url = \"https://crowdsourcing-raw-files.s3.amazonaws.com/QATMR-TE3-json/Platinum-only-sentences.json\";\n    // let data_url = \"https://s3-us-west-2.amazonaws.com/pradeepd-quoref/data/quoref_data_with_ids.json\";\n\n    for (let i = 0; i < n; i++){\n        try{\n            const response = await fetch(data_url);\n            return await parsePassages(response);\n        }catch (e) {\n            console.log(e);\n        }\n    }\n\n    return get_offline_contents();\n}\n\nmodule.exports = {\n    parsePassages,\n    chooseKfromArray,\n    fetchPassagesWithRetries\n};"],"sourceRoot":""}